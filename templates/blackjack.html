{% extends "main.html" %}

{% block blackjack %}
    <h1>Блэкджэк</h1>
    <div id="dealer">
        <h2>Карты дилера</h2>
        <div id="dealer-cards"></div>
        <div id="dealer-score"></div>
{#        <div id="dealer-cards" class="cards-container"></div>#}
    </div>
    <div id="player">
        <h2>Карты игрока</h2>
        <div id="player-hands"></div>
        <div id="player-scores"></div>
{#        <div id="player-cards" class="cards-container"></div>#}
    </div>

    <div class="d-flex flex-row m-auto blackjack-buttons">
        <div class="input-group input-group-sm d-flex flex-row w-auto">
            <label for="decks-count"></label><input type="number" class="form-control mt-1 ms-1 mb-1 rounded-start"
                                                    id="decks-count" min="1" max="8" value="8">
            <button type="button" id="start" class="btn btn-outline-secondary mt-1 me-1 mb-1">Начать</button>
        </div>

        <button type="button" class="btn btn-outline-success mt-1 mb-1" id="hit">Взять</button>
        <button type="button" class="btn btn-outline-success mt-1 mb-1" id="hit2" style="display:none;">Взять 2
        </button>
        <button type="button" class="btn btn btn-outline-danger mt-1 mb-1" id="stand">Стоп</button>
        <button type="button" class="btn btn btn-outline-danger mt-1 mb-1" id="stand2" style="display:none;">Стоп 2
        </button>
        <button type="button" class="btn btn-outline-warning mt-1 mb-1" id="double">Дабл</button>
        <button type="button" class="btn btn-outline-info mt-1 mb-1" id="split">Сплит</button>
    </div>
    <div id="result"></div>
    <script>
        function addCard(containerId, cardName, delay, index) {
            const container = document.getElementById(containerId);
            const card = document.createElement('div');
            card.className = 'card';
            card.style.transform = `translate(${100 + index * 65}px, ${0})`;
            card.style.zIndex = index;

            const cardContent = document.createElement('div');
            cardContent.className = 'card-content';
            cardContent.textContent = cardName;

            card.appendChild(cardContent);
            container.appendChild(card);

            setTimeout(() => {
                card.classList.add('show');
            }, delay);
        }

        function dealCards(playerCards) {
            playerCards.forEach((card, index) => {
                addCard('player-cards', card, index * 500, index);
            });
        }

        function dealCardsDealer(dealerCards) {
            dealerCards.forEach((card, index) => {
                addCard('dealer-cards', card, index * 500, index);
            });
        }

        document.getElementById('start').addEventListener('click', () => {
            const playerCards = ['Ace of Spades', '10 of Hearts'];
            const dealerCards = ['King of Diamonds', '7 of Clubs'];
            dealCards(playerCards);
            dealCardsDealer(dealerCards);
        });
    </script>
{% endblock %}